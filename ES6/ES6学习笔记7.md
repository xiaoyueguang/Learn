# 函数的扩展

## 函数参数的默认值
#### 基本用法
`ES6`中可以给函数设置默认值了
```
function test(x = 'Hello', y = ' World!') {
	console.log(x + y);
}
test();	//=> Hello World!
test('Good');	//=> Good World!
test('Good', '');	//=> Good
```

> 函数的参数具有默认值后,将比以前变得更直观,易读

#### 参数默认值可与解构赋值的默认值结合起来使用

```
function test({str1, str2 = ' World!'}){
	console.log(str1, str2);
};
test();	//=> error
test({});	//=> undefined 'World!'
test({str1: 'Hello'});	//=> 'Hello World!'
test({str1: 'Hello', str2: ' China!'});	//=> 'Hello China!'
```

以上代码在调用`test()`时还是会报错.可采用给参数一个默认的空对象来利用解构赋值去获取默认值

```
function test({str1, str2 = ' World!'} = {}){
	console.log(str1, str2);
};
test();	//=> undefined 'World!'
```

#### 参数默认值的位置

如果想让函数去使用第一个参数的默认值,第二个或之后的参数由自己传过去.可利用 `undefined`

```
function test(x = 'Hello', y = ' World!') {
	console.log(x + y);
}

test(undefined, ' China!');	//=> Hello China!
```

#### 函数的length属性
函数的`length`属性可返回参数的数量.
当函数的参数有默认值时,`length`将*失真*,返回没指定默认值的参数个数.如果指定默认值的参数还不是尾参数,在指定默认值参数的后面将不计入`length`

```
let a = (x, y, z) => {};
console.log(a.length);	//=> 3

let b = (x, y, z = 1) => {};
console.log(b.length);	//=> 2

let c = (x, y = 1, z) => {};
console.log(c.length);	//=> 1

let d = (x = 1, y, z) => {};
console.log(d.length);	//=> 0
```

通过 `ES6` 编译成 `ES5`的代码,可以更深刻的了解 `length` 为什么会失真.

```
var a = function a(x, y, z) {};

var b = function b(x, y) {
	var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];
};

var c = function c(x) {
	var y = arguments.length <= 1 || arguments[1] === undefined ? 1 : arguments[1];
	var z = arguments[2];
};

var d = function d() {
	var x = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];
	var y = arguments[1];
	var z = arguments[2];
};
```

#### 作用域

如果函数的参数默认值是变量,函数会优先先检查当前函数的作用域,再检查全局作用域

```
//	ES6代码
let y = 1;
let f = (x = y) => {
	let y = 2;
	return x;
};
f();	//=> 1

//	编译成ES5后
var y = 1;
var f = function f() {
	var x = arguments.length <= 0 || arguments[0] === undefined ? y : arguments[0];
	return function () {
		var y = 2;
		return x;
	}();
};
f();	//=> 1
```
> 如果不确定作用域的时候,可以将`ES6`转为`ES5`即可了解

#### 应用

参数不能省略时,省略就抛出错误,可这么写

```
function throwIfMissing() {
  throw new Error('Missing parameter');
}

function foo(mustBeProvided = throwIfMissing()) {
  return mustBeProvided;
}

foo();	// Error: Missing parameter
```

将参数设置为`undefined`时,表明这个参数是可以省略的.
```
function foo(optional = undefined) { ··· }
```

## rest参数